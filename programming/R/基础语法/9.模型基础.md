# 一、模型基础

```R
library(tidyverse)
library(modelr)

options(na.action = na.warn)
```

## &#9352;optim()函数

**作用：**通用的优化函数，用于寻找使目标函数最小化（或最大化）的参数值。

```R
optim(par, fn, gr = NULL, ..., 
      method = c("Nelder-Mead", "BFGS", "CG", "L-BFGS-B", "SANN", "Brent"),
      lower = -Inf, upper = Inf,
      control = list(), hessian = FALSE)
```

- `par`：初始参数值（向量）。
- `fn`：目标函数，需返回单个数值。
- `gr`：梯度函数（可选），用于需要导数信息的算法。
- `method`：优化算法（见下文）。
- `lower/upper`：参数边界（仅适用于 "L-BFGS-B" 方法）。
- `control`：控制参数列表（如最大迭代次数、优化方向等）。

## &#9353;lm()函数

**特点**：速度快，且一定能找到全局最小值。

```R
lm(formula, data, subset, weights, na.action, ...)
```

- `formula`：模型公式，如 `y ~ x1 + x2`（`y` 是因变量，`x1` 和 `x2` 是自变量）。
- `data`：数据框，包含公式中变量的数据。
- `subset`：可选，指定用于拟合的数据子集。
- `weights`：可选，指定观测权重（如加权最小二乘法）。

```R
sim1_mod <- lm(y ~ x, data = sim1a)

p <- ggplot(sim1a, aes(x, y))+
  geom_point(size = 2, color = "grey30") +
  geom_abline(intercept = coef(sim1_mod)[1], slope = coef(sim1_mod)[2])
```

## &#9354;data_grid()函数

作用：**根据已有数据的取值范围，创建一组均匀分布的测试点，以便对模型进行系统评估**。

```R
data_grid(data, ...)
```

- **`data`**：原始数据集。
- **`...`**：要生成网格的变量，通常使用 `var = seq_range(...)` 或直接指定值。