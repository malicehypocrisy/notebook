# 一、基础函数

## &#9352;添加标签

```R
labs(
  title = NULL,
  subtitle = NULL,
  caption = NULL,
  x = NULL,
  y = NULL,
  ...
)
```

- **`caption`**：设置图形的脚注，可用于注明数据来源、分析方法或其他需要说明的内容。
- **`...`**：还可以用于设置图例中各个变量的标签，以 `变量名 = "新标签名"` 的形式传入。

```R
p <- ggplot(data = mpg, aes(x = displ, y = hwy, color = drv)) +
  geom_point() +
  labs(title = "不同驱动类型汽车的发动机排量与高速公路油耗关系",
    x = "发动机排量 (升)",
    y = "高速公路油耗 (英里/加仑)",
    color = "驱动类型"  # 设置图例中color对应的标签
  )
```

## &#9353;geom_abline()函数

* 认添加斜率（`slope`）为 1、截距（`intercept`）为 0 的直线（即 y = x）

## &#9354;coord_fixed()函数

* 强制 x 轴和 y 轴的单位长度相等（比例为 1:1）

## &#9355;stat_summary()函数

**作用：**统计汇总

```R
stat_summary(
  mapping = NULL,
  data = NULL,
  geom = "pointrange",
  fun.data = "mean_cl_boot",
  fun.y = NULL,
  fun.ymin = NULL,
  fun.ymax = NULL,
  ...
)
```

* **`geom`**：指定几何对象（如 `"pointrange"`、`"errorbar"`、`"line"` 等）。
* **`fun.data`**：使用预定义的统计函数（如 `"mean_cl_boot"` 计算均值和自助法置信区间）。
* **`fun.y`**：自定义单个统计量（如 `mean`、`median`）。
* **`fun.ymin` 和 `fun.ymax`**：自定义统计量的下限和上限（如标准差范围）。

```R
library(tidyverse)

# 创建ggplot对象，使用+连接图层
p <- ggplot(data = diamonds, mapping = aes(x = cut, y = depth)) +
  # 添加统计摘要图层：中位数+范围线
  stat_summary(
    fun.ymin = min,
    fun.ymax = max,
    fun.y = median,
    geom = "pointrange",  # 指定几何对象为带范围的点
    color = "red"         # 设置颜色以便区分
  ) +
  # 添加箱线图（更适合展示分布）
  geom_boxplot(alpha = 0.3)  # 半透明显示，避免遮挡统计点

# 输出图形
print(p)
```

